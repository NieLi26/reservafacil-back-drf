{% extends 'base_admin.html' %}
{% load static %}

{% block header %}
    <!-- FlatPicker -->
    <link rel="stylesheet" href="{% static 'js/libs/flatpickr-4/flatpickr.min.css' %}" >
   <!-- Vanilla Calendar -->
   <link href="https://cdn.jsdelivr.net/npm/@uvarov.frontend/vanilla-calendar/build/vanilla-calendar.min.css" rel="stylesheet">
   <link href="https://cdn.jsdelivr.net/npm/@uvarov.frontend/vanilla-calendar/build/themes/light.min.css" rel="stylesheet">
   <link href="https://cdn.jsdelivr.net/npm/@uvarov.frontend/vanilla-calendar/build/themes/dark.min.css" rel="stylesheet">
{% endblock header %}


{% block content %}
    <!-- This example requires Tailwind CSS v2.0+ -->
    <div 

    class="px-4 sm:px-6 lg:px-8">
    <div class="sm:flex sm:items-end mb-4">
        <div class="sm:flex-auto">
            <h1 class="text-2xl font-semibold text-gray-900">Listado de Pagos</h1>
            <!-- <p class="mt-2 text-sm text-gray-700">A table of placeholder stock market data that does not make any sense.</p> -->
        </div>
        <!-- <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
            <a href="#" target="_blank" class="inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto">Agregar</a>
        </div> -->
    </div>
    <!-- <input id="vanilla-calendar" type="text"> -->
    <div class="mt-4 flex flex-col">
        <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-8">
                <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                    {% include 'modules/pago/filters.html' %}
                    <table class="min-w-full divide-y divide-gray-300">
                        <thead class="bg-gray-50">
                            <tr>
                            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">Numero</th>
                            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">N° Cita</th>
                            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">Fecha</th>
                            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">Cliente</th>
                            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">Total</th>
                            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">Folio</th>
                            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">Cod. Especialista</th>
                            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">Metodo Pago</th>
                            <!-- <th scope="col" class="relative whitespace-nowrap py-3.5 pl-3 pr-4 sm:pr-6">
                                <span class="sr-only">Edit</span>
                            </th> -->
                            </tr>
                        </thead>
                        <tbody id="table-body" class="divide-y divide-gray-200 bg-white"></tbody>
                    </table>
                    <div class="empty-result"></div>
                    <div id="paginator-container" class="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6"></div>
                </div>
            </div>
        </div>
    </div>

    </div>  
{% endblock content %}


{% block footer %}
    
{% endblock footer %}


{% block js %}
    <!-- vanilla calendar -->
    <script src="https://cdn.jsdelivr.net/npm/@uvarov.frontend/vanilla-calendar/build/vanilla-calendar.min.js" defer></script>

   <!-- FlatPicker -->
   <script type="text/javascript" src="{% static 'js/libs/flatpickr-4/flatpickr.min.js' %}"></script>
   <script type="text/javascript" src="{% static 'js/libs/flatpickr-4/es.js' %}"></script>

<script src="{% static 'js/helpers/getCookieCSRF.js' %}"></script>

<script src="{% static 'js/services/PagoAPI.js' %}"></script>


<script>
    // ********** VARIABLES **********
    const tableBody = document.getElementById('table-body');
    const emptyResult = document.querySelector('.empty-result');

    // filters
    const filterMetodo = document.querySelectorAll('[name="metodo[]"]');
    const searchPago = document.querySelector('#search-pago');
    const filterOrden = document.querySelectorAll('#orden-menu [name="orden"]');
    const btnReset = document.querySelector('#btn-reset');
    const filterFecha = document.querySelector('#fecha-menu input');

    // Paginator
    let currentPage = 1;
    let allPages;
    const paginatorContainer = document.querySelector('#paginator-container');


    // flatpciker
    const optionsFlatPicker = {
        mode: "range",
        locale: "es",  // locale for this instance only
        onChange: function(selectedDates, dateStr, instance) {
            if ( selectedDates.length > 1 ) {
                datosBusqueda.rangoFecha = dateStr;
                cargarPagos();
                // cargarCitas();
                // const arrayDates = dateStr.split(' a ');
                // for ( let date of arrayDates) {
                //    console.log(date);

                // }
            }
        },
    }
    const flatPicker = flatpickr(filterFecha, optionsFlatPicker);


    const datosBusqueda = {
        metodo: [],
        rangoFecha: '',
        q: '',
        orden: ''
    }


    // ********** LISTENERS **********
    eventListeners()
    function eventListeners() {
        document.addEventListener('DOMContentLoaded', () => {
            cargarPagos();

            // vanilla calendar
            // const options = {
            //     input: true,
            //     type: 'multiple',
            //     settings: {
            //         range: {
            //             disablePast: true,
            //         },
            //         selection: {
            //             day: 'multiple-ranged',
            //         },
            //         visibility: {
            //             daysOutside: false,
            //             theme: 'light',
            //         },
            //         lang: 'es-CH', 
            //     },
            //     actions: {
            //         changeToInput(e, HTMLInputElement, dates, time, hours, minutes, keeping) {
            //             if (dates[1]) {
            //                 dates.sort((a, b) => +new Date(a) - +new Date(b));
            //                 HTMLInputElement.value = `${dates[0]} — ${dates[dates.length - 1]}`;
            //                 console.log(`${dates[0]} — ${dates[dates.length - 1]}`)
            //             } else if (dates[0]) {
            //                 HTMLInputElement.value = dates[0];
            //                 console.log(dates[0]);
            //             } else {
            //                 HTMLInputElement.value = '';
            //             }
            //         },
            //     },
            // };

            // vanillaCalendar = new VanillaCalendar(filterFecha, options);
            // vanillaCalendar.init();
        });

        // Filters
        for (let filter of filterMetodo) {
            filter.addEventListener('click', (e) => {
                if ( e.target.checked ) {
                    datosBusqueda.metodo.push(e.target.value);
                    cargarPagos();

                } else {
                    datosBusqueda.metodo = datosBusqueda.metodo.filter( value => value !== e.target.value);
                    cargarPagos();

                }

                // Mostrar cantidad de filtros usados
                const metodoMenu = document.querySelector('#metodo-menu .quantity');
                const countChecked = document.querySelectorAll('[name="metodo[]"]:checked').length;
                if ( countChecked > 0) {
                    metodoMenu.classList.remove('hidden');
                    metodoMenu.textContent = countChecked;
                    return;
                }

                metodoMenu.classList.add('hidden');
                
            })
        }
                
        for (let filter of filterOrden) {
            filter.addEventListener('click', (e) => {
                if ( e.target.checked ) {
                    datosBusqueda.orden = e.target.value;
                    cargarPagos();
                } 
            })
        }

        searchPago.addEventListener('input', e => {
            datosBusqueda.q = e.target.value;
            setTimeout(() => {
                cargarPagos();
            }, 500);
        })

        btnReset.addEventListener('click', resetarPagos)


        // Pagination
        paginatorContainer.addEventListener('click', e => {
            if ( e.target.matches('[prev-btn]') ) {
                loadPrevious();
                return;
            }

            if ( e.target.matches('[next-btn]') ) {
                loadNext();
                return;
            }
        })


    }

   // ********** FUNCTIONS **********
    // Trae la data de citas desde el servidor
    async function cargarPagos() {
        args = {
            page: currentPage,
            metodo: datosBusqueda.metodo.join(','),
            rango_fecha: datosBusqueda.rangoFecha,
            q: datosBusqueda.q,
            orden: datosBusqueda.orden
        };
        const resp = await getPagos(args);
        const { data, paginator, paginator: { has_previous, has_next, page, total_pages } } = resp;

        mostrarPagos(data);
        mostrarPaginacion(paginator);
        
        const prevBtn = document.querySelector('[prev-btn]');
        const nextBtn = document.querySelector('[next-btn]');

        if ( has_previous ) {
            prevBtn.classList.remove('hidden');
        } else {
            prevBtn.classList.add('hidden');
        }

        if ( has_next ) {
            nextBtn.classList.remove('hidden');
        } else {
            nextBtn.classList.add('hidden');
        }

        currentPage = parseInt(page);
        allPages = total_pages;
    }

    // Muestra el citas en la tabla en el HTML
    function mostrarPagos(pagos) {
        cleanHTML(tableBody);
        cleanHTML(emptyResult);
        if ( pagos.length > 0) {
            pagos.forEach( pago => {
                const optionMethods = {
                    TA: {
                        'name': 'Tarjeta',
                        'color': 'green-500'
                    },
                    EF: {
                        'name': 'Efectivo',
                        'color': 'red-500'
                    },
                    FO: {
                        'name': 'Fonasa',
                        'color': 'indigo-500'
                    },
                    IS: {
                        'name': 'Isapre',
                        'color': 'warning'
                    },
                    CO: {
                        'name': 'Convenio',
                        'color': 'blue-500'
                    }
                }

                const { id, cliente: { nombre, rut }, total, cita, folio, cod_especialista, metodo, fecha  } = pago
                const tr = document.createElement('TR');

                const tdNumber = document.createElement('TD');
                tdNumber.classList = 'whitespace-nowrap px-2 py-2 text-sm text-gray-500';
                tdNumber.textContent = id
                tr.appendChild(tdNumber)

                const tdCita = document.createElement('TD');
                tdCita.classList = 'whitespace-nowrap px-2 py-2 text-sm text-gray-500';
                tdCita.textContent = cita
                tr.appendChild(tdCita)

                const tdDate = document.createElement('TD');
                tdDate.classList = 'whitespace-nowrap px-2 py-2 text-sm text-gray-500';
                tdDate.textContent = fecha;
                tr.appendChild(tdDate);

                const tdCliente = document.createElement('TD');
                tdCliente.classList = 'whitespace-nowrap px-2 py-2 text-sm text-gray-500';
                tdCliente.textContent = nombre;
                tr.appendChild(tdCliente);
                
                const tdTotal = document.createElement('TD');
                tdTotal.classList = 'whitespace-nowrap px-2 py-2 text-sm text-gray-500';
                tdTotal.textContent = total.toLocaleString("es-cl", {
                                                                style: "currency",
                                                                currency: "CLP"
                                                            });
                tr.appendChild(tdTotal);
                
                const tdFolio = document.createElement('TD');
                tdFolio.classList = 'whitespace-nowrap px-2 py-2 text-sm text-gray-500';
                tdFolio.textContent = folio;
                tr.appendChild(tdFolio);
                
                const tdCodEspecialista = document.createElement('TD');
                tdCodEspecialista.classList = 'whitespace-nowrap px-2 py-2 text-sm text-gray-500';
                tdCodEspecialista.textContent = cod_especialista;
                tr.appendChild(tdCodEspecialista);
                

                const tdMetodoPago = document.createElement('TD');
                tdMetodoPago.classList = `whitespace-nowrap px-2 py-2 text-sm text-gray-500`;
                const spanMetodoPago = document.createElement('SPAN');
                spanMetodoPago.classList = `py-0.5 px-1 rounded bg-${optionMethods[metodo].color} text-white text-xs`
                spanMetodoPago.textContent = optionMethods[metodo].name;
                tdMetodoPago.appendChild(spanMetodoPago);
                tr.appendChild(tdMetodoPago);


                
                // const tdAction = document.createElement('TD');
                // tdAction.classList = 'relative whitespace-nowrap py-2 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 space-x-2';

                // const btnInfoCli = document.createElement('BUTTON');
                // btnInfoCli.classList = 'text-orange-600 hover:text-orange-900';
                // btnInfoCli.setAttribute('x-on:click', `modalInfoCliente.openModal(${JSON.stringify(rut)})`);
                // btnInfoCli.innerHTML = `<svg class="w-6 h-6" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 392.598 392.598" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path style="fill:#FFC10D;" d="M214.949,191.16l37.689-23.337c2.263-1.422,5.042-1.939,7.628-1.487 c6.465,1.164,12.994,1.681,19.459,1.681c50.23,0,91.022-32.84,91.022-73.18s-40.792-73.115-90.958-73.115 s-91.022,32.84-91.022,73.18c0,19.523,9.568,38.012,27.022,51.911c3.038,2.392,4.59,6.206,4.008,10.02L214.949,191.16z"></path> <g> <path style="fill:#194F82;" d="M94.319,251.281c32.582,0,59.216-26.57,59.216-59.216s-26.57-59.152-59.216-59.152 s-59.216,26.57-59.216,59.216S61.737,251.281,94.319,251.281z M94.319,154.699c20.622,0,37.43,16.743,37.43,37.43 s-16.743,37.43-37.43,37.43s-37.43-16.743-37.43-37.43C57.018,171.442,73.762,154.699,94.319,154.699z"></path> <path style="fill:#194F82;" d="M127.935,268.994c-4.008,0-7.628,2.133-9.568,5.689l-24.048,44.218l-23.984-44.218 c-1.939-3.491-5.56-5.689-9.568-5.689C27.216,268.994,0,296.275,0,329.762v51.911c0,6.012,4.848,10.925,10.925,10.925h166.853 c6.012,0,10.925-4.848,10.925-10.925v-51.911C188.703,296.275,161.422,268.994,127.935,268.994z M166.917,370.747H21.851v-41.051 c0-19.329,14.158-35.362,32.711-38.4l30.19,55.725c4.267,6.982,14.481,8.21,19.135,0l30.19-55.725 c18.554,3.038,32.711,19.071,32.711,38.4v41.051H166.917z"></path> </g> <path style="fill:#FFFFFF;" d="M94.319,154.699c-20.622,0-37.43,16.743-37.43,37.43s16.743,37.43,37.43,37.43 s37.43-16.743,37.43-37.43S114.941,154.699,94.319,154.699z"></path> <path style="fill:#56ACE0;" d="M21.851,370.747h144.937v-41.051c0-19.329-14.158-35.362-32.711-38.4l-30.19,55.661 c-4.719,8.21-14.933,6.982-19.135,0l-30.19-55.661c-18.554,3.038-32.711,19.071-32.711,38.4V370.747z"></path> <g> <path style="fill:#194F82;" d="M249.471,54.562c-2.392,5.495,0.065,11.96,5.56,14.352c5.495,2.392,11.96-0.065,14.352-5.56 c4.849-9.632,17.067-7.111,19.459,1.616c1.293,5.689-1.875,10.02-5.495,11.83c-9.374,4.59-15.386,14.675-15.386,25.665 c0,0-0.84,13.317,10.925,13.317s10.925-13.317,10.925-13.317c0-2.715,1.293-5.107,3.168-6.012 c13.511-6.594,20.558-21.463,17.131-36.331C303.063,30.966,263.887,25.341,249.471,54.562z"></path> <path style="fill:#194F82;" d="M278.885,125.285c-6.012,0-10.925,4.848-10.925,10.925v7.37c0,6.012,4.848,10.925,10.925,10.925 c6.012,0,10.925-4.848,10.925-10.925v-7.434C289.745,130.133,284.897,125.285,278.885,125.285z"></path> <path style="fill:#194F82;" d="M279.725,0c-62.19,0-112.873,42.602-112.873,94.966c0,24.436,10.731,47.192,30.448,64.84 l-7.24,51.329c-1.422,8.339,7.37,16.162,16.549,10.796l54.044-33.358c6.335,0.905,12.735,1.422,19.071,1.422 c62.19,0,112.873-42.602,112.873-94.966S341.98,0,279.725,0z M279.725,168.081c-6.465,0-12.994-0.517-19.459-1.681 c-2.65-0.453-5.301,0.065-7.628,1.487l-37.689,23.337l4.784-34.327c0.517-3.814-1.034-7.628-4.008-10.02 c-17.455-13.899-27.022-32.323-27.022-51.911c0-40.339,40.857-73.18,91.022-73.18s91.022,32.84,91.022,73.18 C370.812,135.305,329.956,168.081,279.725,168.081z"></path> </g> </g></svg>`;
                

                // const btnPayment = document.createElement('BUTTON');
                // btnPayment.classList = estado === 'RL' ? 'text-blue-600 hover:text-blue-900': 'text-gray-600 hover:text-gray-900'; 
                // if ( estado === 'RL' ) {
                //     btnPayment.setAttribute('x-on:click', `modalPaymentCita.openModal(${id})`);
                //     btnPayment.innerHTML = `<svg class="w-6 h-6" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511.999 511.999" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle style="fill:#5AC779;" cx="251.723" cy="219.658" r="89.787"></circle> <path style="fill:#00A085;" d="M278.445,282.722c-49.588,0-89.787-40.199-89.787-89.787c0-17.955,5.291-34.665,14.369-48.696 c-24.718,15.994-41.091,43.785-41.091,75.418c0,49.588,40.199,89.787,89.787,89.787c31.633,0,59.424-16.373,75.418-41.091 C313.11,277.431,296.4,282.722,278.445,282.722z"></path> <g> <path style="fill:#FF7452;" d="M446.261,238.898c-12.474,15.905-30.26,18.716-34.205,19.24c3.944,0.524,21.731,3.335,34.205,19.24 c8.722,11.127,10.315,22.874,10.689,27.791c0.374-4.917,1.967-16.664,10.689-27.791c12.474-15.905,30.26-18.716,34.205-19.24 c-3.944-0.524-21.731-3.335-34.205-19.24c-8.722-11.127-10.315-22.874-10.689-27.791 C456.576,216.023,454.984,227.771,446.261,238.898z"></path> <path style="fill:#FF7452;" d="M245.309,35.808c-12.474,15.905-30.26,18.716-34.205,19.24c3.944,0.524,21.731,3.335,34.205,19.24 c8.722,11.127,10.315,22.874,10.689,27.791c0.374-4.917,1.967-16.664,10.689-27.791c12.474-15.905,30.26-18.716,34.205-19.24 c-3.944-0.524-21.731-3.335-34.205-19.24c-8.722-11.127-10.315-22.874-10.689-27.791C255.624,12.934,254.032,24.681,245.309,35.808 z"></path> <path style="fill:#FF7452;" d="M65.735,238.898c12.474,15.905,30.26,18.716,34.205,19.24c-3.944,0.524-21.731,3.335-34.205,19.24 c-8.722,11.127-10.315,22.874-10.689,27.791c-0.374-4.917-1.967-16.664-10.689-27.791c-12.474-15.905-30.26-18.716-34.205-19.24 c3.944-0.524,21.731-3.335,34.205-19.24c8.722-11.127,10.315-22.874,10.689-27.791C55.421,216.023,57.013,227.771,65.735,238.898z"></path> </g> <path style="fill:#FFD652;" d="M401.368,369.303l-70.547-29.929H204.692c-17.71,0-32.067,14.356-32.067,32.067v17.102 c0,17.71,14.356,32.067,32.067,32.067h-10.689l-129.639-56.06c-15.909-6.879-34.406,0.128-41.763,15.823l-4.918,10.491 c-7.646,16.31-0.359,35.717,16.132,42.966l161.38,70.936c2.033,0.894,4.231,1.355,6.452,1.355h185.891 c2.074,0,4.128-0.402,6.049-1.185L506.12,459.09v-89.787H401.368z"></path> <g> <path style="fill:#FB9D46;" d="M193.178,399.232c-11.771-4.531-20.176-15.804-20.522-29.088c-0.017,0.431-0.033,0.862-0.033,1.297 v17.102c0,13.651,8.534,25.302,20.554,29.929h123.214v-3.207c0-8.855-7.179-16.033-16.033-16.033H193.178z"></path> <path style="fill:#FB9D46;" d="M387.539,482.605H201.646c-2.221,0-4.419-0.462-6.452-1.355L33.815,410.314 c-8.073-3.549-13.933-10.014-16.923-17.602c-6.288,15.902,1.05,34.14,16.923,41.117l161.38,70.936 c2.033,0.894,4.231,1.355,6.452,1.355H387.54c2.074,0,4.128-0.403,6.049-1.185L506.12,459.09v-23.516L393.587,481.42 C391.667,482.202,389.612,482.605,387.539,482.605z"></path> </g> <path d="M501.844,359.148H398.722l-69.047-29.292c-0.99-0.421-2.054-0.637-3.131-0.637H200.415 c-22.103,0-40.084,17.981-40.084,40.084v17.102c0,3.931,0.569,7.733,1.629,11.326l-98.692-42.678 c-20.019-8.657-42.948,0.033-52.204,19.779l-4.918,10.49c-4.622,9.861-5.059,20.905-1.232,31.101 c3.828,10.196,11.426,18.226,21.398,22.608l72.537,31.884c4.052,1.784,8.783-0.06,10.565-4.114 c1.782-4.053-0.061-8.783-4.114-10.565l-72.536-31.884c-5.983-2.629-10.541-7.447-12.84-13.564 c-2.295-6.117-2.033-12.744,0.74-18.661l4.918-10.49c5.553-11.849,19.31-17.06,31.323-11.868l129.639,56.06 c1.004,0.434,2.088,0.658,3.182,0.658h10.689H311.58c4.428,0,8.017-3.588,8.017-8.017c0-4.428-3.588-8.017-8.017-8.017H200.415 c-13.261,0-24.05-10.789-24.05-24.05v-17.102c0-13.261,10.789-24.05,24.05-24.05h124.499l69.047,29.292 c0.99,0.421,2.054,0.637,3.131,0.637h96.735v76.38l-107.538,43.812c-2.253,0.917-5.13,0.593-7.524,0.593 c-4.452,0-169.413,0-174.459,0c-2.256,0-4.514,0.017-6.77,0c-1.17-0.01-2.311-0.203-3.389-0.678l-63.188-27.775 c-4.055-1.781-8.783,0.061-10.566,4.113c-1.782,4.053,0.061,8.784,4.113,10.566l63.189,27.775c3.069,1.349,6.325,2.032,9.678,2.032 h185.891c3.124,0,6.176-0.599,9.074-1.778l112.532-45.847c3.017-1.229,4.992-4.164,4.992-7.423v-89.787 C509.861,362.737,506.272,359.148,501.844,359.148z"></path> <path d="M251.723,317.461c53.929,0,97.804-43.875,97.804-97.804c0-8.683-1.139-17.299-3.389-25.609 c-1.157-4.275-5.556-6.801-9.832-5.644c-4.273,1.157-6.8,5.558-5.644,9.832c1.879,6.945,2.831,14.152,2.831,21.421 c0,45.089-36.681,81.77-81.77,81.77s-81.77-36.681-81.77-81.77s36.681-81.77,81.77-81.77c26.718,0,51.809,13.102,67.118,35.05 c2.532,3.63,7.528,4.525,11.161,1.988c3.631-2.533,4.521-7.53,1.988-11.161c-18.305-26.243-48.312-41.91-80.267-41.91 c-53.929,0-97.804,43.875-97.804,97.804S197.794,317.461,251.723,317.461z"></path> <path d="M281.652,190.263c4.428,0,8.017-3.588,8.017-8.017s-3.588-8.017-8.017-8.017H259.74v-9.086c0-4.428-3.588-8.017-8.017-8.017 s-8.017,3.588-8.017,8.017v9.086h-6.948c-10.314,0-18.706,8.392-18.706,18.706v17.102c0,10.314,8.392,18.706,18.706,18.706h6.948 v22.447h-21.912c-4.428,0-8.017,3.588-8.017,8.017s3.588,8.017,8.017,8.017h21.912v9.086c0,4.428,3.588,8.017,8.017,8.017 s8.017-3.588,8.017-8.017v-9.086h6.948c10.314,0,18.706-8.392,18.706-18.706v-17.102c0-10.314-8.392-18.706-18.706-18.706h-6.948 v-22.447H281.652z M266.687,228.743c1.474,0,2.672,1.198,2.672,2.672v17.102c0,1.474-1.198,2.672-2.672,2.672h-6.948v-22.447 H266.687z M243.706,212.71h-6.948c-1.474,0-2.672-1.198-2.672-2.672v-17.102c0-1.474,1.198-2.672,2.672-2.672h6.948V212.71z"></path> <path d="M411.002,266.085c5.443,0.724,19.158,3.753,28.951,16.239c6.958,8.877,8.628,18.505,9.004,23.453 c0.317,4.179,3.802,7.41,7.994,7.41s7.677-3.229,7.994-7.41c0.376-4.949,2.046-14.577,9.003-23.452 c9.794-12.488,23.509-15.517,28.952-16.24c3.985-0.529,6.962-3.927,6.962-7.947s-2.977-7.417-6.962-7.947 c-5.443-0.724-19.158-3.753-28.951-16.239c-6.958-8.877-8.628-18.505-9.004-23.453c-0.317-4.179-3.802-7.41-7.994-7.41 s-7.677,3.229-7.994,7.41c-0.376,4.949-2.046,14.576-9.004,23.453c-9.793,12.486-23.509,15.516-28.951,16.239 c-3.985,0.529-6.962,3.927-6.962,7.947S407.017,265.555,411.002,266.085z M452.569,243.845 C452.57,243.845,452.57,243.843,452.569,243.845c1.669-2.128,3.12-4.279,4.381-6.422c1.262,2.144,2.713,4.295,4.381,6.422 c5.031,6.415,10.793,11.007,16.419,14.293c-5.628,3.286-11.389,7.879-16.42,14.294c-1.667,2.127-3.119,4.278-4.38,6.421 c-1.262-2.144-2.713-4.295-4.381-6.422c-5.031-6.415-10.793-11.007-16.419-14.293C441.777,254.852,447.538,250.26,452.569,243.845z"></path> <path d="M210.05,62.995c5.443,0.724,19.158,3.753,28.951,16.239c6.958,8.877,8.628,18.505,9.004,23.453 c0.317,4.179,3.802,7.41,7.994,7.41c4.192,0,7.677-3.229,7.994-7.41c0.376-4.949,2.046-14.577,9.003-23.452 c9.794-12.488,23.509-15.517,28.952-16.24c3.983-0.53,6.96-3.927,6.96-7.947s-2.977-7.417-6.962-7.947 c-5.443-0.724-19.158-3.753-28.951-16.239c-6.958-8.877-8.628-18.505-9.004-23.453c-0.316-4.18-3.801-7.41-7.993-7.41 s-7.677,3.229-7.994,7.41c-0.376,4.949-2.046,14.577-9.004,23.453c-9.793,12.486-23.509,15.516-28.951,16.239 c-3.984,0.53-6.961,3.927-6.961,7.947S206.065,62.465,210.05,62.995z M251.617,40.755C251.618,40.755,251.618,40.754,251.617,40.755 c1.669-2.128,3.12-4.279,4.381-6.422c1.262,2.144,2.713,4.295,4.381,6.422c5.031,6.415,10.793,11.007,16.419,14.293 c-5.628,3.286-11.389,7.879-16.42,14.294c-1.667,2.127-3.119,4.278-4.38,6.421c-1.262-2.144-2.713-4.295-4.381-6.422 c-5.031-6.415-10.793-11.007-16.419-14.293C240.825,51.762,246.586,47.17,251.617,40.755z"></path> <path d="M9.098,266.085c5.443,0.724,19.158,3.753,28.951,16.239c6.958,8.877,8.628,18.505,9.004,23.453 c0.317,4.179,3.802,7.41,7.994,7.41s7.677-3.229,7.994-7.41c0.376-4.949,2.046-14.577,9.003-23.452 c9.794-12.488,23.509-15.517,28.952-16.24c3.985-0.529,6.962-3.927,6.962-7.947s-2.977-7.417-6.962-7.947 c-5.442-0.724-19.158-3.754-28.951-16.239c-6.959-8.877-8.628-18.505-9.004-23.453c-0.319-4.18-3.803-7.41-7.995-7.41 s-7.677,3.229-7.994,7.41c-0.376,4.949-2.046,14.576-9.003,23.452c-9.794,12.488-23.509,15.517-28.952,16.24 c-3.984,0.53-6.961,3.927-6.961,7.947S5.113,265.555,9.098,266.085z M50.666,243.843c1.667-2.127,3.119-4.277,4.38-6.421 c1.261,2.144,2.713,4.294,4.38,6.421c0,0,0,0.001,0.001,0.001c5.031,6.415,10.793,11.007,16.419,14.293 c-5.628,3.286-11.389,7.879-16.42,14.294c-1.667,2.127-3.119,4.278-4.38,6.421c-1.262-2.144-2.713-4.295-4.381-6.422 c-5.031-6.415-10.793-11.007-16.419-14.293C39.873,254.852,45.635,250.259,50.666,243.843z"></path> </g></svg>`;

                // } else {
                //     btnPayment.disabled = true;
                //     btnPayment.innerHTML = `<svg fill="#000000" class="w-6 h-6" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511.999 511.999" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M501.844,359.148H398.722l-69.047-29.292c-0.99-0.421-2.054-0.637-3.131-0.637H200.415 c-22.103,0-40.083,17.981-40.083,40.083v17.102c0,3.931,0.569,7.733,1.629,11.326l-98.692-42.678 c-20.019-8.657-42.948,0.033-52.204,19.779l-4.918,10.49c-4.622,9.861-5.059,20.905-1.232,31.101 c3.828,10.196,11.426,18.226,21.398,22.608l72.537,31.884c4.052,1.784,8.783-0.06,10.565-4.114 c1.782-4.053-0.061-8.783-4.114-10.565l-72.536-31.884c-5.983-2.629-10.541-7.447-12.84-13.564 c-2.295-6.117-2.033-12.744,0.74-18.661l4.918-10.49c5.553-11.849,19.31-17.06,31.323-11.868l129.639,56.06 c1.004,0.434,2.088,0.658,3.182,0.658h10.689H311.58c4.428,0,8.017-3.588,8.017-8.017c0-4.428-3.588-8.017-8.017-8.017H200.415 c-13.261,0-24.05-10.789-24.05-24.05v-17.102c0-13.261,10.789-24.05,24.05-24.05h124.499l69.047,29.292 c0.99,0.421,2.054,0.637,3.131,0.637h96.735v76.38l-107.538,43.812c-0.966,0.393-1.984,0.593-3.026,0.593H197.372 c-1.118,0-2.204-0.228-3.226-0.678l-63.188-27.775c-4.055-1.781-8.783,0.061-10.566,4.113c-1.782,4.053,0.061,8.784,4.113,10.566 l63.189,27.775c3.069,1.349,6.325,2.032,9.678,2.032h185.891c3.124,0,6.176-0.599,9.074-1.778l112.532-45.847 c3.018-1.229,4.992-4.164,4.992-7.424v-89.787C509.861,362.737,506.272,359.148,501.844,359.148z"></path> </g> </g> <g> <g> <path d="M346.137,194.049c-1.157-4.274-5.556-6.801-9.832-5.644c-4.273,1.156-6.8,5.558-5.644,9.832 c1.879,6.945,2.831,14.152,2.831,21.421c0,45.089-36.681,81.77-81.77,81.77s-81.77-36.681-81.77-81.77 c0-45.089,36.681-81.77,81.77-81.77c26.718,0,51.809,13.102,67.118,35.05c2.532,3.63,7.528,4.525,11.161,1.988 c3.631-2.533,4.521-7.53,1.988-11.161c-18.305-26.243-48.312-41.91-80.267-41.91c-53.929,0-97.804,43.875-97.804,97.804 c0,53.929,43.875,97.804,97.804,97.804s97.804-43.875,97.804-97.804C349.527,210.975,348.387,202.359,346.137,194.049z"></path> </g> </g> <g> <g> <path d="M281.652,190.263c4.428,0,8.017-3.588,8.017-8.017c0-4.428-3.588-8.017-8.017-8.017H259.74v-9.086 c0-4.428-3.588-8.017-8.017-8.017c-4.428,0-8.017,3.588-8.017,8.017v9.086h-6.948c-10.314,0-18.706,8.392-18.706,18.706v17.102 c0,10.314,8.392,18.706,18.706,18.706h6.948v22.447h-21.912c-4.428,0-8.017,3.588-8.017,8.017c0,4.428,3.588,8.017,8.017,8.017 h21.912v9.086c0,4.428,3.588,8.017,8.017,8.017c4.428,0,8.017-3.588,8.017-8.017v-9.086h6.948 c10.314,0,18.706-8.392,18.706-18.706v-17.102c0-10.314-8.392-18.706-18.706-18.706h-6.948v-22.447H281.652z M243.706,212.71 h-6.948c-1.474,0-2.672-1.198-2.672-2.672v-17.102c0-1.474,1.198-2.672,2.672-2.672h6.948V212.71z M266.687,228.743 c1.474,0,2.672,1.198,2.672,2.672v17.102c0,1.474-1.198,2.672-2.672,2.672h-6.948v-22.447H266.687z"></path> </g> </g> <g> <g> <path d="M502.901,250.191c-5.443-0.724-19.158-3.753-28.951-16.239c-6.959-8.877-8.628-18.505-9.004-23.453 c-0.317-4.179-3.802-7.41-7.994-7.41s-7.677,3.229-7.994,7.41c-0.376,4.949-2.046,14.577-9.004,23.453 c-9.793,12.486-23.509,15.516-28.951,16.239c-3.985,0.529-6.962,3.927-6.962,7.947c0,4.02,2.977,7.417,6.962,7.947 c5.443,0.724,19.158,3.753,28.951,16.239c6.958,8.877,8.628,18.505,9.004,23.453c0.317,4.179,3.802,7.41,7.994,7.41 s7.677-3.229,7.994-7.41c0.376-4.949,2.046-14.576,9.003-23.452c9.794-12.488,23.509-15.517,28.952-16.24 c3.985-0.529,6.962-3.927,6.962-7.947C509.863,254.118,506.886,250.721,502.901,250.191z M461.331,272.432 c-1.667,2.127-3.119,4.278-4.38,6.421c-1.262-2.144-2.713-4.295-4.381-6.422c-5.031-6.415-10.793-11.007-16.419-14.293 c5.628-3.286,11.388-7.878,16.419-14.293c1.669-2.128,3.12-4.279,4.381-6.422c1.262,2.144,2.713,4.295,4.381,6.422 c5.031,6.416,10.793,11.008,16.419,14.293C472.123,261.424,466.362,266.017,461.331,272.432z"></path> </g> </g> <g> <g> <path d="M301.947,47.101c-5.443-0.724-19.158-3.753-28.951-16.239c-6.958-8.877-8.628-18.505-9.004-23.453 c-0.316-4.18-3.801-7.41-7.993-7.41s-7.677,3.229-7.994,7.41c-0.376,4.949-2.046,14.577-9.004,23.453 c-9.793,12.486-23.509,15.516-28.951,16.239c-3.984,0.53-6.961,3.927-6.961,7.947c0,4.02,2.977,7.417,6.962,7.947 c5.443,0.724,19.158,3.753,28.951,16.239c6.958,8.877,8.628,18.505,9.004,23.453c0.317,4.179,3.802,7.41,7.994,7.41 c4.192,0,7.677-3.229,7.994-7.41c0.376-4.949,2.046-14.576,9.003-23.452c9.794-12.488,23.509-15.517,28.952-16.24 c3.983-0.53,6.96-3.927,6.96-7.947C308.909,51.028,305.932,47.631,301.947,47.101z M260.379,69.342 c-1.667,2.127-3.119,4.278-4.38,6.421c-1.262-2.144-2.713-4.295-4.381-6.422c-5.031-6.415-10.793-11.007-16.419-14.293 c5.628-3.286,11.388-7.878,16.419-14.293c1.669-2.128,3.12-4.279,4.381-6.422c1.262,2.144,2.713,4.295,4.381,6.422 c5.031,6.416,10.793,11.008,16.419,14.293C271.171,58.334,265.41,62.927,260.379,69.342z"></path> </g> </g> <g> <g> <path d="M100.997,250.191c-5.442-0.724-19.158-3.754-28.951-16.239c-6.959-8.877-8.628-18.505-9.004-23.453 c-0.319-4.18-3.803-7.41-7.995-7.41s-7.677,3.229-7.994,7.41c-0.376,4.949-2.046,14.577-9.003,23.452 c-9.794,12.488-23.509,15.517-28.952,16.24c-3.984,0.53-6.961,3.927-6.961,7.947c0,4.02,2.977,7.417,6.962,7.947 c5.443,0.724,19.158,3.753,28.951,16.239c6.958,8.877,8.628,18.505,9.004,23.453c0.318,4.179,3.802,7.41,7.994,7.41 s7.677-3.229,7.994-7.41c0.376-4.949,2.046-14.576,9.003-23.452c9.794-12.488,23.509-15.517,28.952-16.24 c3.985-0.529,6.962-3.927,6.962-7.947C107.959,254.118,104.982,250.721,100.997,250.191z M59.427,272.432 c-1.667,2.127-3.119,4.278-4.38,6.421c-1.262-2.144-2.713-4.295-4.381-6.422c-5.031-6.415-10.793-11.007-16.419-14.293 c5.628-3.286,11.389-7.879,16.42-14.294c1.667-2.127,3.119-4.277,4.38-6.421c1.261,2.144,2.713,4.294,4.38,6.421 c0,0,0,0.001,0.001,0.001c5.031,6.416,10.793,11.008,16.419,14.293C70.219,261.424,64.458,266.017,59.427,272.432z"></path> </g> </g> </g></svg>`;
                // }


                // const btnMotivo = document.createElement('BUTTON');
                // btnMotivo.classList = motivo !== '' ? 'text-blue-600 hover:text-blue-900': 'text-gray-600 hover:text-gray-900'; 
                // if ( motivo !== '' ) {
                //     btnMotivo.setAttribute('x-on:click', `modalMotivo.openModal(${id})`);
                //     btnMotivo.innerHTML = `<svg class="w-6 h-6" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 392.598 392.598" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path style="fill:#56ACE0;" d="M367.62,150.174l-19.265,19.265l-21.463-21.398l19.265-19.265c4.073-4.073,11.249-4.073,15.451,0 l6.012,6.012C371.887,138.99,371.887,145.972,367.62,150.174z"></path> <path style="fill:#FFFFFF;" d="M242.141,66.586c0-6.012-4.848-10.925-10.925-10.925H32.752c-6.012,0-10.925,4.848-10.925,10.925 v293.301c0,6.012,4.848,10.925,10.925,10.925h198.465c6.012,0,10.925-4.848,10.925-10.925"></path> <rect x="43.677" y="100.978" style="fill:#FFC10D;" width="176.614" height="248.048"></rect> <g> <path style="fill:#194F82;" d="M194.626,148.17H69.341c-6.012,0-10.925-4.848-10.925-10.925c0-6.012,4.848-10.925,10.925-10.925 h125.285c6.012,0,10.925,4.848,10.925,10.925C205.487,143.321,200.638,148.17,194.626,148.17z"></path> <path style="fill:#194F82;" d="M194.626,207.257H69.341c-6.012,0-10.925-4.848-10.925-10.925s4.848-10.925,10.925-10.925h125.285 c6.012,0,10.925,4.848,10.925,10.925C205.487,202.343,200.638,207.257,194.626,207.257z"></path> <path style="fill:#194F82;" d="M383.006,119.337l-6.012-6.012c-6.206-6.206-14.352-9.568-23.079-9.568s-16.937,3.426-23.079,9.568 l-66.909,66.844V66.586c0-18.036-14.675-32.711-32.711-32.711h-7.499V10.925C223.717,4.913,218.869,0,212.792,0 c-6.012,0-10.925,4.848-10.925,10.925V33.81h-32.065V10.925C169.802,4.913,164.954,0,158.877,0 c-6.012,0-10.925,4.848-10.925,10.925V33.81h-32.129V10.925C115.822,4.913,110.974,0,104.897,0C98.82,0,94.166,4.913,94.166,10.925 V33.81H62.036V10.925C62.036,4.913,57.188,0,51.111,0S40.186,4.848,40.186,10.925V33.81h-7.434 C14.715,33.875,0.04,48.485,0.04,66.586v293.301c0,18.036,14.675,32.711,32.711,32.711h198.465 c18.036,0,32.711-14.675,32.711-32.711v-75.184l119.079-119.079C395.741,152.824,395.741,132.137,383.006,119.337z M242.141,359.887c0,6.012-4.848,10.925-10.925,10.925H32.752c-6.012,0-10.925-4.848-10.925-10.925V66.586 c0-6.012,4.848-10.925,10.925-10.925h7.499v22.885c0,6.012,4.848,10.925,10.925,10.925s10.925-4.848,10.925-10.925V55.661h32.065 v22.885c0,6.012,4.848,10.925,10.925,10.925s10.925-4.848,10.925-10.925V55.661h32.065v22.885c0,6.012,4.848,10.925,10.925,10.925 s10.925-4.848,10.925-10.925V55.661h32.065v22.885c0,6.012,4.848,10.925,10.925,10.925c6.012,0,10.925-4.848,10.925-10.925V55.661 h7.499c6.012,0,10.925,4.848,10.925,10.925v135.37l-42.473,42.473H69.341c-6.012,0-10.925,4.848-10.925,10.925 c0,6.012,4.848,10.925,10.925,10.925h108.477l-6.335,6.335c-1.616,1.616-2.715,3.814-3.103,6.077l-3.685,24.76H69.341 c-6.012,0-10.925,4.848-10.925,10.925c0,6.012,4.848,10.925,10.925,10.925h92.574c0.323,2.327,1.293,4.461,3.038,6.206 c3.168,2.715,6.335,3.685,9.374,3.103l43.378-6.594c2.327-0.323,4.396-1.422,6.077-3.103l18.36-18.36V359.887z M210.853,307.006 l-25.277,3.814l3.814-25.277l122.117-122.117l21.398,21.398L210.853,307.006z M367.62,150.174l-19.265,19.265l-21.463-21.398 l19.265-19.265c4.073-4.073,11.313-4.073,15.451,0l6.012,6.012C371.887,138.99,371.887,145.972,367.62,150.174z"></path> </g> <polygon style="fill:#56ACE0;" points="332.905,184.824 311.507,163.426 189.325,285.479 185.576,310.756 210.853,307.006 "></polygon> </g></svg>`;

                // } else {
                //     btnMotivo.disabled = true;
                //     btnMotivo.innerHTML = `<svg class="w-6 h-6" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 392.598 392.598" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path style="fill:#ffffff;" d="M367.62,150.174l-19.265,19.265l-21.463-21.398l19.265-19.265c4.073-4.073,11.249-4.073,15.451,0 l6.012,6.012C371.887,138.99,371.887,145.972,367.62,150.174z"></path> <path style="fill:#FFFFFF;" d="M242.141,66.586c0-6.012-4.848-10.925-10.925-10.925H32.752c-6.012,0-10.925,4.848-10.925,10.925 v293.301c0,6.012,4.848,10.925,10.925,10.925h198.465c6.012,0,10.925-4.848,10.925-10.925"></path> <rect x="43.677" y="100.978" style="fill:#ffffff;" width="176.614" height="248.048"></rect> <g> <path style="fill:#194F82;" d="M194.626,148.17H69.341c-6.012,0-10.925-4.848-10.925-10.925c0-6.012,4.848-10.925,10.925-10.925 h125.285c6.012,0,10.925,4.848,10.925,10.925C205.487,143.321,200.638,148.17,194.626,148.17z"></path> <path style="fill:#194F82;" d="M194.626,207.257H69.341c-6.012,0-10.925-4.848-10.925-10.925s4.848-10.925,10.925-10.925h125.285 c6.012,0,10.925,4.848,10.925,10.925C205.487,202.343,200.638,207.257,194.626,207.257z"></path> <path style="fill:#194F82;" d="M383.006,119.337l-6.012-6.012c-6.206-6.206-14.352-9.568-23.079-9.568s-16.937,3.426-23.079,9.568 l-66.909,66.844V66.586c0-18.036-14.675-32.711-32.711-32.711h-7.499V10.925C223.717,4.913,218.869,0,212.792,0 c-6.012,0-10.925,4.848-10.925,10.925V33.81h-32.065V10.925C169.802,4.913,164.954,0,158.877,0 c-6.012,0-10.925,4.848-10.925,10.925V33.81h-32.129V10.925C115.822,4.913,110.974,0,104.897,0C98.82,0,94.166,4.913,94.166,10.925 V33.81H62.036V10.925C62.036,4.913,57.188,0,51.111,0S40.186,4.848,40.186,10.925V33.81h-7.434 C14.715,33.875,0.04,48.485,0.04,66.586v293.301c0,18.036,14.675,32.711,32.711,32.711h198.465 c18.036,0,32.711-14.675,32.711-32.711v-75.184l119.079-119.079C395.741,152.824,395.741,132.137,383.006,119.337z M242.141,359.887c0,6.012-4.848,10.925-10.925,10.925H32.752c-6.012,0-10.925-4.848-10.925-10.925V66.586 c0-6.012,4.848-10.925,10.925-10.925h7.499v22.885c0,6.012,4.848,10.925,10.925,10.925s10.925-4.848,10.925-10.925V55.661h32.065 v22.885c0,6.012,4.848,10.925,10.925,10.925s10.925-4.848,10.925-10.925V55.661h32.065v22.885c0,6.012,4.848,10.925,10.925,10.925 s10.925-4.848,10.925-10.925V55.661h32.065v22.885c0,6.012,4.848,10.925,10.925,10.925c6.012,0,10.925-4.848,10.925-10.925V55.661 h7.499c6.012,0,10.925,4.848,10.925,10.925v135.37l-42.473,42.473H69.341c-6.012,0-10.925,4.848-10.925,10.925 c0,6.012,4.848,10.925,10.925,10.925h108.477l-6.335,6.335c-1.616,1.616-2.715,3.814-3.103,6.077l-3.685,24.76H69.341 c-6.012,0-10.925,4.848-10.925,10.925c0,6.012,4.848,10.925,10.925,10.925h92.574c0.323,2.327,1.293,4.461,3.038,6.206 c3.168,2.715,6.335,3.685,9.374,3.103l43.378-6.594c2.327-0.323,4.396-1.422,6.077-3.103l18.36-18.36V359.887z M210.853,307.006 l-25.277,3.814l3.814-25.277l122.117-122.117l21.398,21.398L210.853,307.006z M367.62,150.174l-19.265,19.265l-21.463-21.398 l19.265-19.265c4.073-4.073,11.313-4.073,15.451,0l6.012,6.012C371.887,138.99,371.887,145.972,367.62,150.174z"></path> </g> <polygon style="fill:#ffffff;" points="332.905,184.824 311.507,163.426 189.325,285.479 185.576,310.756 210.853,307.006 "></polygon> </g></svg>`;
                // }

                // const btnAnulled = document.createElement('BUTTON');
                // btnAnulled.classList = estado !== 'AN' ? 'text-red-600 hover:text-red-900' : 'text-gray-600';
                // if ( estado !== 'AN' ) {
                //     btnAnulled.setAttribute('x-on:click', `modalAnulledCita.openModal(${id})`);
                // } else {
                //     btnAnulled.disabled = true;
                // }

                // btnAnulled.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                //                     <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                //                     </svg>
                //                     `;

                // // const btnEdit = document.createElement('BUTTON');
                // // btnEdit.setAttribute('x-on:click', `modalUpdateCita.openModal(${id})`)
                // // btnEdit.classList = 'text-yellow-600 hover:text-yellow-900'
                // // btnEdit.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                // //                         <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
                // //                     </svg>
                // //                     `;
                
                                    
                // tdAction.appendChild(btnInfoCli);
                // tdAction.appendChild(btnPayment);
                // tdAction.appendChild(btnMotivo);
                // // tdAction.appendChild(btnEdit);
                // tdAction.appendChild(btnAnulled);
                // tr.appendChild(tdAction);

                tableBody.appendChild(tr);
            })
            return;
        } 
        emptyResult.innerHTML = `
        <!-- Empty -->
        <div class="pt-10 pb-16 sm:pt-24 sm:pb-36 text-center" style="">
            <svg width="96" height="96" fill="none" class="mx-auto mb-6 text-gray-900">
                <path d="M36 28.024A18.05 18.05 0 0025.022 39M59.999 28.024A18.05 18.05 0 0170.975 39" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><ellipse cx="37.5" cy="43.5" rx="4.5" ry="7.5" fill="currentColor"></ellipse><ellipse cx="58.5" cy="43.5" rx="4.5" ry="7.5" fill="currentColor"></ellipse><path d="M24.673 75.42a9.003 9.003 0 008.879 5.563m-8.88-5.562A8.973 8.973 0 0124 72c0-7.97 9-18 9-18s9 10.03 9 18a9 9 0 01-8.448 8.983m-8.88-5.562C16.919 68.817 12 58.983 12 48c0-19.882 16.118-36 36-36s36 16.118 36 36-16.118 36-36 36a35.877 35.877 0 01-14.448-3.017" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M41.997 71.75A14.94 14.94 0 0148 70.5c2.399 0 4.658.56 6.661 1.556a3 3 0 003.999-4.066 12 12 0 00-10.662-6.49 11.955 11.955 0 00-7.974 3.032c1.11 2.37 1.917 4.876 1.972 7.217z" fill="currentColor"></path>
            </svg>
            <p class="text-lg leading-5 font-medium text-gray-900 mb-3">Lo siento! No hay coincidencias con lo que buscas.</p>
            <!-- <p>Si quieres intenta con otros parametros</a>. -->
            </p>
        </div>
        `
    }

    function mostrarPaginacion(paginator) {
        cleanHTML(document.querySelector('#paginator-container'));
        const { page, total_pages, has_previous, has_next, paginate_by, total_results, start_index, end_index } = paginator;

        const html = `

            <div class="flex flex-1 justify-between sm:hidden">
                <a href="#" class="relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Previous</a>
                <a href="#" class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Next</a>
            </div>
            <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
                <div>
                    <p class="text-sm text-gray-700">
                    Mostrando
                    <span class="font-medium">${start_index}</span>
                    a
                    <span class="font-medium">${end_index}</span>
                    de
                    <span class="font-medium">${total_results}</span>
                    Resultados
                    </p>
                </div>
                <div>
                    <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
                    <button prev-btn class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                        <span class="sr-only">Previous</span>
                        <svg class="pointer-events-none h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    ${generatePageLinks(total_pages, page)}
                    <button next-btn class="next-btn relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                        <span class="sr-only">Next</span>
                        <svg class="pointer-events-none h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    </nav>
                </div>
            </div>
            
            `;

        document.querySelector('#paginator-container').innerHTML = html;    
    }

    function generatePageLinks(allPages, page){
            let link = '';

            let beforePages = page - 1;
            let afterPages = page + 1;
            let liActive;

            if(page > 1){
                // link += `
                // <button 
                // onclick="elem(allPages, ${page-1})" 
                // prev-btn class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                //     <span class="sr-only">Previous</span>
                //     <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                //     <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
                //     </svg>
                // </button>
                // `
                // li += `<li class="btn" onclick="elem(allPages, ${page-1})" ><i class="fas fa-angle-left"></i></li>`;
            }

            for (let pageLength = beforePages; pageLength <= afterPages; pageLength++){

                if(pageLength > allPages){
                    continue;
                }
                if(pageLength == 0){
                    pageLength = pageLength + 1;
                }

                if(page == pageLength){
                    link += `<button 
                    onclick="loadSelectedPage(${pageLength})" 
                    class="relative z-10 inline-flex items-center bg-indigo-600 px-4 py-2 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">${pageLength}</button>`
                }else{
                    link += `<button 
                    onclick="loadSelectedPage(${pageLength})" 
                    class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">${pageLength}</button>`;
                }

            }

            if(page < allPages){
                // link += `
                
                //         <button 
                //         onclick="elem(allPages, ${page+1})" 
                //         next-btn class="next-btn relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                //             <span class="sr-only">Next</span>
                //             <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                //             <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                //             </svg>
                //         </button>
                // `
                // li += `<li class="btn" onclick="elem(allPages, ${page+1})" ><i class="fas fa-angle-right"></i></li>`;
            }

            return link
        }

    function loadNext() {
        currentPage++;
        cargarPagos();
    }

    function loadPrevious() {
        currentPage--;
        cargarPagos();
    }

    function loadSelectedPage(page) {
        currentPage = page;
        cargarPagos();
    }

    function resetarPagos() {
        // resetear filtros
        datosBusqueda.metodo = [];
        datosBusqueda.rangoFecha = '';
        datosBusqueda.q = '';
        datosBusqueda.orden = '';
        
        // resetear campos
        for ( filter of filterMetodo ) {
            filter.checked = false
        }

        for ( filter of filterOrden ) {
            filter.value === 'asc' ? filter.checked = true : filter.checked = false
        }

        const metodoMenu = document.querySelector('#metodo-menu .quantity');
        metodoMenu.classList.add('hidden');
        metodoMenu.textContent = 0;

        searchPago.value = '';
        filterFecha.value = '';

        flatPicker.clear();

        currentPage = 1;
        cargarPagos();
    }

    // Limpiar el HTML
    function cleanHTML(selector) {
        while ( selector.firstChild ) {
            selector.removeChild(selector.firstChild);
        }
    }
</script>
    
{% endblock js %}